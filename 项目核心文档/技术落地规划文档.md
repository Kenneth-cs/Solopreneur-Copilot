# 超级个体创业OS (Solopreneur Copilot) 技术落地规划

## 1. 技术架构选型

鉴于“快速验证”和“全栈落地”的核心需求，技术栈选择侧重于**开发效率、生态丰富度与部署便捷性**。

### 1.1 核心技术栈
*   **前端框架**：**Next.js (App Router)**
    *   *理由*：React 生态标准，SEO友好（利于内容营销），全栈能力强（API Routes）。
*   **UI 组件库**：**Tailwind CSS + shadcn/ui**
    *   *理由*：极致的开发速度，高度可定制，现代化审美，复制粘贴即可用。
*   **后端/API**：**Next.js Server Actions / API Routes**
    *   *理由*：对于MVP阶段，直接使用 Next.js 的后端能力可避免维护独立后端服务，降低部署复杂度。后期业务复杂可拆分 NestJS/Go。
*   **数据库**：**MySQL (PlanScale 或 云托管)** + **Prisma ORM**
    *   *理由*：Prisma 提供优秀的类型安全和开发体验；MySQL 通用且成熟。
*   **AI 模型层**：**字节火山引擎 (Volcano Engine) API** / **Coze API**
    *   *理由*：国内访问稳定，模型能力强，成本可控。用于调研报告生成、角色扮演（毒舌VC）、日报生成。
*   **部署与运维**：**腾讯云 (Lighthouse/CVM)** + **Docker** + **Nginx**
    *   *理由*：已有腾讯云资源，Docker 方便环境一致性和后续微服务化。

---

## 2. 系统架构设计

### 2.1 模块化设计
系统采用模块化单体 (Modular Monolith) 结构，便于初期快速迭代，后期拆分。

```
src/
├── app/                 # Next.js App Router 页面
├── components/          # UI 组件
├── lib/                 # 通用工具
│   ├── ai/              # AI Client 封装 (Volcano/Coze)
│   ├── db/              # Prisma Client
│   └── auth/            # 鉴权逻辑
├── modules/             # 核心业务模块
│   ├── idea-validator/  # 创意碎纸机业务逻辑
│   ├── time-boxer/      # 倒计时业务逻辑
│   ├── daily-agent/     # 复盘 Agent 业务逻辑
│   └── matrix-core/     # 基础设施 (Passport, Payment)
└── services/            # 外部服务集成 (Search API, Payment API)
```

### 2.2 关键数据模型 (Schema Draft)

*   **User**: 创业者/管理员账户。
*   **Idea**: 创意记录。
    *   `title`, `description`, `canvas_data` (JSON), `score` (int), `status` (pending/approved/rejected).
*   **Project**: 正式立项的项目（关联 Idea）。
    *   `name`, `repo_url`, `deadline` (datetime), `mvp_features` (JSON).
*   **DailyLog**: 每日复盘记录。
    *   `date`, `questions_answers` (JSON), `commit_logs` (text), `summary` (text).
*   **ProductMetrics**: 产品数据快照。
    *   `project_id`, `date`, `dau`, `revenue`, `cost`.

---

## 3. AI Agent 实现策略

### 3.1 市场调研 Agent
*   **工具链**：集成 Serper.dev 或 Bing Search API 获取实时信息。
*   **Prompt 策略**：
    *   Step 1: 关键词提取与扩展。
    *   Step 2: 搜索执行（GitHub, Product Hunt, Competitors）。
    *   Step 3: 信息汇总与 Markdown 报告生成。

### 3.2 毒舌 VC Agent
*   **Persona**：设定为“唯利是图、注重数据、说话尖锐”的风险投资人。
*   **Input**：用户填写的商业画布数据 + 市场调研报告。
*   **Output**：评分 (0-100) + 拒绝理由/通过建议。

### 3.3 每日复盘 Agent
*   **交互模式**：基于 Chat UI 的对话流。
*   **数据源融合（Data Fusion）**：
    *   **代码侧**：通过 GitHub Webhook/API 获取当日 Commit Message（硬核产出）。
    *   **业务侧（MySQL）**：读取系统内的 `UserActivity` 表（如：新录入的 Idea、通过的 VC 评分、完成的 Marketing 任务）。
    *   **思考侧（MySQL）**：存储当晚“灵魂六问”的对话记录。
*   **生成逻辑**：AI 将 `Git Commit` + `业务操作日志` + `复盘问答` 组合，生成一份包含“技术进度 + 商业进展 + 深度思考”的完整日报。

---

## 4. 基础设施层 (Matrix Core) 落地

这是为了支持未来多产品矩阵的“底座”。

### 4.1 统一鉴权 (Passport)
*   **方案**：基于 NextAuth.js (Auth.js)。
*   **实现**：构建一个独立的 OAuth Provider 服务，或者在主应用中暴露统一的 Auth API。
*   **目标**：未来开发 App A, App B 时，只需配置 `AUTH_URL=https://my-venture-os.com/api/auth`。

### 4.2 统一支付 (Payment Hub)
*   **聚合层**：编写一个通用的 Payment Adapter 接口。
*   **实现**：优先对接 Stripe (海外) 和 微信支付 (国内)。
*   **Webhook**：建立统一的 Webhook 接收端，分发事件到对应子产品的数据库。

---

## 5. 开发实施路线图 (Roadmap)

### Phase 1: 启动与自律 (Days 1-3)
*   **目标**：建立项目，跑通“每日复盘”。
*   **任务**：
    1.  `create-next-app` 初始化项目，配置 Tailwind + Shadcn。
    2.  搭建数据库 (MySQL + Prisma)。
    3.  开发“每日复盘 Agent”页面：简单的 Chat 界面。
    4.  接入火山引擎 API，配置“灵魂六问” Prompt。
    5.  **产出**：每晚能和 AI 对话，生成 Markdown 日报。

### Phase 2: 创意验证 (Days 4-7)
*   **目标**：实现 Idea 录入与评估。
*   **任务**：
    1.  开发 Idea 录入表单（商业画布）。
    2.  集成 Search API，编写调研 Agent 逻辑。
    3.  调整“毒舌 VC” Prompt，实现自动打分。
    4.  **产出**：能够输入 Idea，得到一份调研报告和评分。

### Phase 3: 项目管控 (Days 8-10)
*   **目标**：管理正式项目与倒计时。
*   **任务**：
    1.  Project 列表页与详情页。
    2.  倒计时组件开发。
    3.  邮件/通知服务接入 (Resend / Server Chan)。

### Phase 4: 矩阵基建 (长期迭代)
*   **目标**：提炼通用能力。
*   **任务**：
    1.  将 Auth 和 Payment 逻辑抽离为 SDK 或独立 API 模块。
    2.  开发统一数据 Dashboard。
